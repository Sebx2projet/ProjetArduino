#include <SPI.h>  
#include <Pixy.h>
Pixy pixy;
void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  Serial.print("Starting...\n");

  pixy.init();
}

void loop() {
  uint16_t nb_blocks = pixy.getBlocks();
  float largeur_objet=3.5; // en cm
  int largeur_objet_pixel=pixy.blocks[0].width;
  float distance;
  static int premier_coup=1;
  static float focal; 

  if (premier_coup)
  {
    if (nb_blocks)
    {
      distance =40;
      focal = (largeur_objet_pixel*distance)/ largeur_objet;
      Serial.println(focal);
      premier_coup=0;
    }
  }
  if(nb_blocks)
  {
    distance= (largeur_objet*focal)/largeur_objet_pixel;
   // Serial.println(distance); 
  }
}
